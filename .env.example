# ===========================================
# LongBridge 量化交易系统环境变量配置示例
# ===========================================
# 说明：
# 1. 复制此文件为 .env.local 并填入实际配置值
# 2. 配置项必须使用索引后缀 _1, _2, ...，即使只有一个监控标的也必须使用 _1 后缀
# 3. 系统会自动检测存在的监控标的配置（MONITOR_SYMBOL_1, MONITOR_SYMBOL_2, ...）
# ===========================================

# ===========================================
# API 配置（必需）
# ===========================================
# LongPort API 凭证，从开放平台获取
# https://open.longport.com/
LONGPORT_APP_KEY=LONGPORT_APP_KEY
LONGPORT_APP_SECRET=LONGPORT_APP_SECRET
LONGPORT_ACCESS_TOKEN=LONGPORT_ACCESS_TOKEN

# API 区域配置（可选，默认 'hk'）
# 'cn' = 中国大陆区域，使用 .cn 域名
# 'hk' = 香港及其他地区，使用 .com 域名
LONGPORT_REGION=cn

# ===========================================
# 全局配置
# ===========================================
# 末日保护功能（可选，默认 true）
# 启用后：收盘前 15 分钟拒绝买入，收盘前 5 分钟自动清仓所有持仓
DOOMSDAY_PROTECTION=true

# 开盘保护（可选，默认 false）
# 启用后：早盘 09:30 起 N 分钟内暂停信号生成（仅早盘，行情/指标仍显示）
OPENING_PROTECTION_ENABLED=false
# 保护时长（分钟，范围 1-60），启用保护时必须配置
OPENING_PROTECTION_MINUTES=15

# 调试模式（可选，默认 false）
# 启用后输出详细的调试日志
DEBUG=true

# 买入订单超时配置
# BUY_ORDER_TIMEOUT_ENABLED - 是否启用买入订单超时检测，默认 true
#   true  = 启用超时检测，买入订单超时后撤销订单（默认）
#   false = 关闭超时检测，买入订单只要未成交就一直持续追踪价格
BUY_ORDER_TIMEOUT_ENABLED=true
# 买入订单超时时间（秒），范围 30-600，默认 180（3分钟）
BUY_ORDER_TIMEOUT_SECONDS=180

# 卖出订单超时配置
# SELL_ORDER_TIMEOUT_ENABLED - 是否启用卖出订单超时检测，默认 true
#   true  = 启用超时检测，卖出订单超时后转为市价单（默认）
#   false = 关闭超时检测，卖出订单只要未成交就一直持续追踪价格
SELL_ORDER_TIMEOUT_ENABLED=false
# 卖出订单超时时间（秒），范围 30-600，默认 180（3分钟）
SELL_ORDER_TIMEOUT_SECONDS=180

# 订单价格更新间隔（秒），范围 1-60，默认 5
ORDER_MONITOR_PRICE_UPDATE_INTERVAL=5

# 订单类型配置（可选）
# 交易标的的订单类型，默认 ELO
# 注意：必须使用全大写，区分大小写
#   LO  = 限价单 (Limit Order)
#   ELO = 增强限价单 (Enhanced Limit Order，默认)
#   MO  = 市价单 (Market Order)
TRADING_ORDER_TYPE=ELO

# 触发最大浮亏清仓的订单类型，默认 MO
# 注意：必须使用全大写，区分大小写
#   LO  = 限价单
#   ELO = 增强限价单
#   MO  = 市价单 (默认，确保快速清仓)
LIQUIDATION_ORDER_TYPE=ELO

# ===========================================
# 监控标的 1 配置（必须使用 _1 后缀）
# ===========================================
# 监控标的（必需）
# 用于监控技术指标并生成交易信号的标的代码
# 阿里巴巴
MONITOR_SYMBOL_1=9988.HK

# 交易标的（必需）
# 做多标的：用于做多交易的标的代码，一般为认购证或牛证（必须为 ticker.region）
LONG_SYMBOL_1=55131.HK
# 做空标的：用于做空交易的标的代码，一般为认沽证或熊证（必须为 ticker.region）
SHORT_SYMBOL_1=56614.HK

# 自动寻标配置（可选）
# 启用后将忽略 LONG_SYMBOL_1 / SHORT_SYMBOL_1，由系统自动寻标并动态占位
AUTO_SEARCH_ENABLED_1=false
# 牛/熊最低价格阈值（HKD）
AUTO_SEARCH_MIN_PRICE_BULL_1=0.048
AUTO_SEARCH_MIN_PRICE_BEAR_1=0.048
# 牛/熊分均成交额阈值（HKD/分钟）
AUTO_SEARCH_MIN_TURNOVER_PER_MINUTE_BULL_1=100000
AUTO_SEARCH_MIN_TURNOVER_PER_MINUTE_BEAR_1=100000
# 到期日最小月份（默认 3）
AUTO_SEARCH_EXPIRY_MIN_MONTHS_1=12
# 早盘开盘延迟分钟数（默认 5，仅早盘生效）
AUTO_SEARCH_OPEN_DELAY_MINUTES_1=5
# 距回收价换标范围（格式 min,max；包含等于）
SWITCH_DISTANCE_RANGE_BULL_1=0.45,3.5
SWITCH_DISTANCE_RANGE_BEAR_1=-3.5,-0.45

# 交易参数
# 目标买入金额（HKD，必需，必须 > 0）
TARGET_NOTIONAL_1=10000
# 同方向买入时间间隔（秒，可选，范围 10-600，默认 60）
BUY_INTERVAL_SECONDS_1=60

# 风险控制参数
# 最大持仓市值（HKD，必需，必须 > 0）
MAX_POSITION_NOTIONAL_1=100000
# 单日最大亏损（HKD，必需，必须 >= 0，0 表示不限制）          
MAX_DAILY_LOSS_1=1500      
# 单标的浮亏保护阈值（HKD，必需，必须 >= 0，0 表示不启用）           
MAX_UNREALIZED_LOSS_PER_SYMBOL_1=3000
# 保护性清仓后买入冷却（可选，不设置则不冷却，可选值：1-120 / half-day / one-day）
LIQUIDATION_COOLDOWN_MINUTES_1=half-day

# 信号配置（必需）
# 格式：(条件列表)/满足数量|条件组2|条件组3
# 支持指标：RSI:n (n为1-100), PSY:n (n为1-100), MFI, K, D, J
# EMA/MACD/DIF/DEA 仅用于延迟验证，不支持用于信号配置
# 支持运算符：< 和 >
# 格式说明：括号内为条件列表（逗号分隔），/N 表示需满足 N 项条件，| 分隔不同条件组（最多3个，满足任一组即可）
# 买入做多信号
SIGNAL_BUYCALL_1=(RSI:6<25,MFI<20,D<25,J<0)/3|(J<-20)
# 卖出做多信号
SIGNAL_SELLCALL_1=(RSI:6>75,MFI>80,D>75,J>100)/3|(J>110)
# 买入做空信号
SIGNAL_BUYPUT_1=(RSI:6>75,MFI>80,D>75,J>100)/3|(J>120)
# 卖出做空信号
SIGNAL_SELLPUT_1=(RSI:6<25,MFI<20,D<25,J<0)/3|(J<-15)

# 延迟验证配置
# 买入信号延迟验证
# 延迟验证时间（秒，可选，范围 0-120，默认 60）
# 设置后会在信号触发后延迟指定时间再次验证指标趋势
VERIFICATION_DELAY_SECONDS_BUY_1=60
# 验证指标（可选，逗号分隔，如未设置则不进行延迟验证）
# 支持的指标：K, D, J, MACD, DIF, DEA, EMA:n (n为1-250), PSY:n (n为1-100)
# 例如：D,EMA:5,PSY:12 表示验证 D、EMA:5 和 PSY:12 指标
VERIFICATION_INDICATORS_BUY_1=D,MACD,EMA:5

# 卖出信号延迟验证
# 延迟验证时间（秒，可选，范围 0-120，默认 60）
VERIFICATION_DELAY_SECONDS_SELL_1=60
# 验证指标（可选，逗号分隔，如未设置则不进行延迟验证）
VERIFICATION_INDICATORS_SELL_1=K,MACD

# 智能平仓策略
# 启用智能平仓时，仅卖出成交价低于当前价的盈利订单（卖出数量上限为可用持仓）
# 关闭智能平仓时，卖出信号直接清空该标的全部持仓（可能未盈利但优先保证止损）

# 智能平仓策略（可选，默认 true）
# true = 启用智能平仓（仅卖出盈利订单）
# false = 关闭智能平仓（直接全部平仓）
SMART_CLOSE_ENABLED_1=true

# ===========================================
# 多标的配置示例
# ===========================================
# 如需配置多个监控标的，请：
# 1. 为每个监控标的添加相应的配置项，使用 _1, _2, ... 后缀
# 2. 系统会自动检测存在的监控标的配置
# 3. 取消注释并填写第二个监控标的的配置项

# ---------- 监控标的 2 ----------
# # 中芯国际
# # 监控标的（必需）
# MONITOR_SYMBOL_2=0981.HK
# # 做多标的（必需）
# LONG_SYMBOL_2=55131.HK
# # 做空标的（必需）
# SHORT_SYMBOL_2=56614.HK

# # 自动寻标配置（可选）
# # 启用后将忽略 LONG_SYMBOL_2 / SHORT_SYMBOL_2，由系统自动寻标并动态占位
# AUTO_SEARCH_ENABLED_2=false
# # 牛/熊最低价格阈值（HKD）
# AUTO_SEARCH_MIN_PRICE_BULL_2=0.048
# AUTO_SEARCH_MIN_PRICE_BEAR_2=0.048
# # 牛/熊分均成交额阈值（HKD/分钟）
# AUTO_SEARCH_MIN_TURNOVER_PER_MINUTE_BULL_2=100000
# AUTO_SEARCH_MIN_TURNOVER_PER_MINUTE_BEAR_2=100000
# # 到期日最小月份（默认 3）
# AUTO_SEARCH_EXPIRY_MIN_MONTHS_2=12
# # 早盘开盘延迟分钟数（默认 5，仅早盘生效）
# AUTO_SEARCH_OPEN_DELAY_MINUTES_2=5
# # 距回收价换标范围（格式 min,max；包含等于）
# SWITCH_DISTANCE_RANGE_BULL_2=0.45,3.5
# SWITCH_DISTANCE_RANGE_BEAR_2=-3.5,-0.45

# # 目标买入金额（HKD，必需）
# TARGET_NOTIONAL_2=5000
# # 同方向买入时间间隔（秒，可选）
# BUY_INTERVAL_SECONDS_2=60
# # 最大持仓市值（HKD，必需）
# MAX_POSITION_NOTIONAL_2=50000
# # 单日最大亏损（HKD，必需）
# MAX_DAILY_LOSS_2=1500
# # 单标的浮亏保护阈值（HKD，必需）
# MAX_UNREALIZED_LOSS_PER_SYMBOL_2=3000
# # 保护性清仓后买入冷却（可选，不设置则不冷却，可选值：1-120 / half-day / one-day）
# LIQUIDATION_COOLDOWN_MINUTES_2=half-day
# # 买入做多信号
# SIGNAL_BUYCALL_2=(RSI:6<25,MFI<20,D<25,J<0)/3
# # 卖出做多信号
# SIGNAL_SELLCALL_2=(RSI:6>75,MFI>80,D>75,J>100)/3|(J>110)
# # 买入做空信号
# SIGNAL_BUYPUT_2=(RSI:6>75,MFI>80,D>75,J>100)/3
# # 卖出做空信号
# SIGNAL_SELLPUT_2=(RSI:6<25,MFI<20,D<25,J<0)/3|(J<-15)
# # 买入信号延迟验证时间（秒，可选）
# VERIFICATION_DELAY_SECONDS_BUY_2=60
# # 买入验证指标（可选）
# VERIFICATION_INDICATORS_BUY_2=D,MACD,EMA:5
# # 卖出信号延迟验证时间（秒，可选）
# VERIFICATION_DELAY_SECONDS_SELL_2=60
# # 卖出验证指标（可选）
# VERIFICATION_INDICATORS_SELL_2=K,MACD
# # 智能平仓策略开关（可选）
# SMART_CLOSE_ENABLED_2=true


