# ===========================================
# LongBridge 量化交易系统环境变量配置示例
# ===========================================
# 说明：
# 1. 复制此文件为 .env.local 并填入实际配置值
# 2. 配置项必须使用索引后缀 _1, _2, ...，即使只有一个监控标的也必须使用 _1 后缀
# 3. 必须设置 MONITOR_COUNT，其值必须等于监控标的的数量（>= 1）
# ===========================================

# ===========================================
# API 配置（必需）
# ===========================================
# LongPort API 凭证，从开放平台获取
# https://open.longport.com/
LONGPORT_APP_KEY=your_app_key_here
LONGPORT_APP_SECRET=your_app_secret_here
LONGPORT_ACCESS_TOKEN=your_access_token_here

# API 区域配置（可选，默认 'hk'）
# 'cn' = 中国大陆区域，使用 .cn 域名
# 'hk' = 香港及其他地区，使用 .com 域名
LONGPORT_REGION=cn

# ===========================================
# 全局配置
# ===========================================
# 监控标的数量（必需，>= 1）
# 即使只有一个监控标的，也必须设置为 1 并使用 _1 后缀
MONITOR_COUNT=1

# 末日保护功能（可选，默认 true）
# 启用后：收盘前 15 分钟拒绝买入，收盘前 5 分钟自动清仓所有持仓
DOOMSDAY_PROTECTION=true

# 调试模式（可选，默认 false）
# 启用后输出详细的调试日志
DEBUG=false

# 买入订单超时配置
# BUY_ORDER_TIMEOUT_ENABLED - 是否启用买入订单超时检测，默认 true
#   true  = 启用超时检测，买入订单超时后撤销订单（默认）
#   false = 关闭超时检测，买入订单只要未成交就一直持续追踪价格
BUY_ORDER_TIMEOUT_ENABLED=true
# 买入订单超时时间（秒），范围 30-600，默认 180（3分钟）
BUY_ORDER_TIMEOUT_SECONDS=180

# 卖出订单超时配置
# SELL_ORDER_TIMEOUT_ENABLED - 是否启用卖出订单超时检测，默认 true
#   true  = 启用超时检测，卖出订单超时后转为市价单（默认）
#   false = 关闭超时检测，卖出订单只要未成交就一直持续追踪价格
SELL_ORDER_TIMEOUT_ENABLED=true
# 卖出订单超时时间（秒），范围 30-600，默认 180（3分钟）
SELL_ORDER_TIMEOUT_SECONDS=180

# 订单价格更新间隔（秒），范围 1-60，默认 5
ORDER_MONITOR_PRICE_UPDATE_INTERVAL=5

# 订单类型配置（可选）
# TRADING_ORDER_TYPE - 交易标的的订单类型，默认 ELO
# 注意：必须使用全大写，区分大小写
#   LO  = 限价单 (Limit Order)
#   ELO = 增强限价单 (Enhanced Limit Order，默认)
#   MO  = 市价单 (Market Order)
TRADING_ORDER_TYPE=ELO

# LIQUIDATION_ORDER_TYPE - 触发最大浮亏清仓的订单类型，默认 MO
# 注意：必须使用全大写，区分大小写
#   LO  = 限价单
#   ELO = 增强限价单
#   MO  = 市价单 (默认，确保快速清仓)
LIQUIDATION_ORDER_TYPE=MO

# ===========================================
# 监控标的 1 配置（必须使用 _1 后缀）
# ===========================================
# 监控标的（必需）
# 用于监控技术指标并生成交易信号的标的代码
MONITOR_SYMBOL_1=HSI.HK

# 交易标的（必需）
# 做多标的：用于做多交易的标的代码，一般为认购证或牛证
LONG_SYMBOL_1=61001  
# 做空标的：用于做空交易的标的代码，一般为认沽证或熊证  
SHORT_SYMBOL_1=53486  

# 交易参数
# 目标买入金额（HKD，必需，必须 > 0）
TARGET_NOTIONAL_1=10000
# 同方向买入时间间隔（秒，可选，范围 10-600，默认 60）
BUY_INTERVAL_SECONDS_1=90   

# 风险控制参数
# 最大持仓市值（HKD，必需，必须 > 0）
MAX_POSITION_NOTIONAL_1=100000
# 单日最大亏损（HKD，必需，必须 >= 0，0 表示不限制）          
MAX_DAILY_LOSS_1=3000         
# 单标的浮亏保护阈值（HKD，必需，必须 >= 0，0 表示不启用）           
MAX_UNREALIZED_LOSS_PER_SYMBOL_1=5000         

# 信号配置（必需）
# 格式：(条件列表)/满足数量|条件组2|条件组3
# 支持指标：RSI:n (n为1-100), EMA:n (n为1-250), MFI, K, D, J, MACD, DIF, DEA
# 支持运算符：< 和 >
# 格式说明：括号内为条件列表（逗号分隔），/N 表示需满足 N 项条件，| 分隔不同条件组（最多3个，满足任一组即可）
# 买入做多信号
SIGNAL_BUYCALL_1=(RSI:6<25,MFI<20,D<25,J<0)/3
# 卖出做多信号
SIGNAL_SELLCALL_1=(RSI:6>75,MFI>80,D>75,J>100)/3|(J>110)
# 买入做空信号
SIGNAL_BUYPUT_1=(RSI:6>75,MFI>80,D>75,J>100)/3
# 卖出做空信号
SIGNAL_SELLPUT_1=(RSI:6<25,MFI<20,D<25,J<0)/3|(J<-15)

# 延迟验证配置
# 买入信号延迟验证
# 延迟验证时间（秒，可选，范围 0-120，默认 60）
# 设置后会在信号触发后延迟指定时间再次验证指标趋势
VERIFICATION_DELAY_SECONDS_BUY_1=90  
# 验证指标（可选，逗号分隔，如未设置则不进行延迟验证）
# 支持的指标：K, D, J, MACD, DIF, DEA, EMA:n (n为1-250)
# 例如：D,EMA:5 表示验证 D 指标和 5 周期 EMA 指标      
VERIFICATION_INDICATORS_BUY_1=D,EMA:5  

# 卖出信号延迟验证
# 延迟验证时间（秒，可选，范围 0-120，默认 60）
VERIFICATION_DELAY_SECONDS_SELL_1=75  
# 验证指标（可选，逗号分隔，如未设置则不进行延迟验证）     
VERIFICATION_INDICATORS_SELL_1=K 

# 智能平仓策略
# 智能平仓策略会在平仓时检测当前标的价格是否大于持仓平均成本价，若大于则全部平仓，若没有大于则只会平掉已经盈利的持仓（只平掉成交价格低于当前价的订单）。
# 如果关闭智能平仓则在符合平仓条件时会平掉所有该标的持仓（可能未盈利但优先保证止损）

# 智能平仓策略（可选，默认 true）
# true = 启用智能平仓（检查成本价，当前价高于成本价则全部平仓，否则只平掉盈利的持仓）
# false = 关闭智能平仓（不检查成本价，直接全部平仓）
SMART_CLOSE_ENABLED_1=true


# ===========================================
# 多标的配置示例
# ===========================================
# 如需配置多个监控标的，请：
# 1. 设置 MONITOR_COUNT=2（或其他数量）
# 2. 为每个监控标的添加相应的配置项，使用 _1, _2, ... 后缀
# 3. 取消注释并填写第二个监控标的的配置项

# MONITOR_COUNT=2

# ---------- 监控标的 2 ----------
# MONITOR_SYMBOL_2=02318.HK
# LONG_SYMBOL_2=61234
# SHORT_SYMBOL_2=54321
# TARGET_NOTIONAL_2=15000
# MAX_POSITION_NOTIONAL_2=150000
# MAX_DAILY_LOSS_2=5000
# MAX_UNREALIZED_LOSS_PER_SYMBOL_2=8000
# BUY_INTERVAL_SECONDS_2=120
# SIGNAL_BUYCALL_2=(RSI:14<30,MFI<20,D<30)/2
# SIGNAL_SELLCALL_2=(RSI:14>70,MFI>80,D>70)/2
# SIGNAL_BUYPUT_2=(RSI:14>70,MFI>80,D>70)/2
# SIGNAL_SELLPUT_2=(RSI:14<30,MFI<20,D<30)/2
# VERIFICATION_DELAY_SECONDS_BUY_2=60
# VERIFICATION_INDICATORS_BUY_2=K,J
# VERIFICATION_DELAY_SECONDS_SELL_2=60
# VERIFICATION_INDICATORS_SELL_2=D,DIF
# SMART_CLOSE_ENABLED_2=true
