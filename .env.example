# ============================================================================
# LongBrige 自动化交易程序 - 环境变量配置
# ============================================================================
# 
# ⚠️ 重要提示：
# 1. 程序启动时会自动验证所有配置项
# 2. 如果任何必需的配置项缺失或无效，程序将不会启动
# 3. 此文件已添加到 .gitignore，不会被提交到版本控制系统
#
# ============================================================================

# ----------------------------------------------------------------------------
# LongPort OpenAPI 配置（必需）
# ----------------------------------------------------------------------------
# 从 LongPort 开放平台获取：https://open.longbridge.com
# 1. 访问 https://open.longbridge.com
# 2. 注册/登录账号
# 3. 创建应用并获取 App Key 和 App Secret
# 4. 根据文档配置环境变量

# App Key
LONGPORT_APP_KEY=LONGPORT_APP_KEY

# App Secret
LONGPORT_APP_SECRET=LONGPORT_APP_SECRET

# Access Token
LONGPORT_ACCESS_TOKEN=LONGPORT_ACCESS_TOKEN

# Region
LONGPORT_REGION=cn

# ----------------------------------------------------------------------------
# 交易标的配置（必需）
# ----------------------------------------------------------------------------
# 标的代码可以不带 .HK 后缀，程序会自动添加

# 监控标的（用于计算指标和生成交易信号）
MONITOR_SYMBOL=HSI.HK

# 做多标的（当监控标的产生 BUY 信号时买入）
LONG_SYMBOL=60802

# 做空标的（当监控标的产生 SELL 信号时买入）
SHORT_SYMBOL=53086

# ----------------------------------------------------------------------------
# 信号配置（必需，针对监控标的信号触发条件）
# ----------------------------------------------------------------------------
# 格式：(条件1,条件2,...)/N|(条件A)|(条件B,条件C)/M
# - 括号内是条件列表，逗号分隔
# - /N：括号内条件需满足 N 项，不设则全部满足
# - |：分隔不同条件组（最多3个），满足任一组即可
# - 支持指标：RSI:n(n为周期), MFI, D (KDJ.D), J (KDJ.J)
# - 支持运算符：< 和 >
# - 支持负数阈值
#
# 示例配置说明：
# (RSI:6<20,MFI<15,D<20,J<-1)/3|(J<-20)
# 含义：条件组1需要4个条件满足3个，或者条件组2的J<-20满足即可
#
# 买入做多信号配置（BUYCALL）
SIGNAL_BUYCALL=(RSI:6<20,MFI<15,D<20,J<-1)/3|(J<-20)

# 卖出做多信号配置（SELLCALL）
SIGNAL_SELLCALL=(RSI:6>80,MFI>85,D>79,J>100)/3|(J>110)

# 买入做空信号配置（BUYPUT）
SIGNAL_BUYPUT=(RSI:6>80,MFI>85,D>80,J>100)/3|(J>120)

# 卖出做空信号配置（SELLPUT）
SIGNAL_SELLPUT=(RSI:6<20,MFI<15,D<22,J<0)/3|(J<-15)

# 同方向买入时间间隔（秒），范围 10-600，默认 60 秒
# 用于限制同一方向（做多或做空）的买入频率，避免短时间内重复买入
# 例如：设置为 60 表示同一方向 60 秒内只能买入一次
BUY_INTERVAL_SECONDS=90

# ----------------------------------------------------------------------------
# 延迟验证配置（可选）
# ----------------------------------------------------------------------------

# 延迟验证时间间隔（秒），范围 0-120，默认 60 秒
# 设置为 0 表示不进行延迟验证（买入信号立即执行）
# 延迟验证机制：当买入信号触发后，需要等待指定秒数，然后验证指标趋势是否符合预期
VERIFICATION_DELAY_SECONDS=90

# 延迟验证指标列表（逗号分隔），可选值: K, D, J, MACD, DIF, DEA，EMA:n(n为周期)
# K, D, J: KDJ 指标的三个值
# MACD, DIF, DEA: MACD 指标的三个值
# 留空或不设置则不进行延迟验证（必须明确设置才会启用延迟验证）
# 验证条件: 买入做多时所有指标的第二个值都要大于第一个值，买入做空时所有指标的第二个值都要小于第一个值
# 示例: VERIFICATION_INDICATORS=K,MACD (使用KDJ的K值和MACD的MACD值进行验证)
# 示例: VERIFICATION_INDICATORS=K,D,J,MACD,DIF,DEA (使用所有6个指标进行验证)
# 注意：如果要启用延迟验证，建议至少设置一个指标，推荐使用 D,DEA(保守型)
VERIFICATION_INDICATORS=D,EMA:7

# ----------------------------------------------------------------------------
# 交易金额和仓位配置（必需）
# ----------------------------------------------------------------------------

# 目标买入金额（HKD），会按 <= 此金额且尽量接近的方式计算股数
TARGET_NOTIONAL=10000

# 做多标的的最小买卖单位（每手股数，作为后备值，优先使用从API获取的值）
LONG_LOT_SIZE=100

# 做空标的的最小买卖单位（每手股数，作为后备值，优先使用从API获取的值）
SHORT_LOT_SIZE=100

# ----------------------------------------------------------------------------
# 风险管理配置（必需）
# ----------------------------------------------------------------------------

# 单标的最大持仓市值（HKD），不允许超过此金额
MAX_POSITION_NOTIONAL=100000

# 单标的单日最大亏损（HKD），超过后禁止继续开新仓（必须为非负数，可以为 0）
MAX_DAILY_LOSS=5000

# 单标的触发避难程序的亏损（HKD），超过后立即以市价单进行清仓（设置为 0 或未设置则禁用此功能）
MAX_UNREALIZED_LOSS_PER_SYMBOL=10000

# 末日保护程序（收盘前15分钟拒绝买入，收盘前5分钟清空所有持仓）
# 港股当日收盘时间：下午 16:00
# 收盘前15分钟：15:45-16:00（拒绝买入）
# 收盘前5分钟：15:55-16:00（自动清仓）
# 设置为 "true" 启用，设置为 "false" 禁用
DOOMSDAY_PROTECTION=true

# ----------------------------------------------------------------------------
# 调试配置（可选）
# ----------------------------------------------------------------------------

# 是否启用 DEBUG 日志
# 设置为 "true" 启用详细日志，设置为 "false" 或留空则禁用
DEBUG=false