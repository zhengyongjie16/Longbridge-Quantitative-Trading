# 订单归属映射配置设计

## 目标

- 新增 `ORDER_OWNERSHIP_MAPPING_N`，用于从 `stockName` 中解析订单归属缩写
- 归属解析不再依赖监控标的代码（避免 stockName 仅含缩写导致无法归属）
- 保证归属匹配与方向判定可追溯、可校验、可配置

## 设计概览

订单归属解析由"映射配置 + 方向判定"两部分组成：每个监控标的配置一组归属缩写列表（可包含多个别名），解析时先匹配缩写，再从同一片段识别 `RC/RP` 决定方向。配置在启动阶段校验，包含空值、重复别名与跨标的冲突，确保归属规则在运行前完整且不歧义。归属映射属于监控标的配置的一部分，但在 `.env` 中紧邻自动寻标开关，强调其在自动寻标场景下的必要性。

## 配置与解析规则

- `ORDER_OWNERSHIP_MAPPING_N`：逗号分隔的缩写列表（如 `ALIBA,ALI`），读取后统一大写、去空、去重，并按长度降序排列以避免前缀误匹配。
- 归属解析规则：对每个缩写检测 `缩写+RC` 或 `缩写+RP` 是否出现在 `stockName` 中，命中 `RC` 归属 LONG，命中 `RP` 归属 SHORT；同一缩写同时命中或均未命中则视为不可归属。
- 多标的场景：按监控标的遍历归属映射，首个命中即返回归属；若无命中则返回 null 并由上层决定是否跳过。

## 影响范围

涉及订单归属解析的模块包括启动席位恢复（`getLatestTradedSymbol`）、当日亏损跟踪与亏损偏移计算（`resolveOrderOwnership`），以及所有依赖 `stockName` 的归属过滤逻辑。新增配置需要同时更新配置解析、校验、文档与测试用例，确保行为在 TDD 下覆盖正常路径与异常路径（空映射、冲突映射、方向不明确）。
